name: CI
on:
  push:
    branches: [master]
  pull_request:
    types: [opened, synchronize]
jobs:  
 test:
  name: Run tests on ${{ matrix.os }} ${{ matrix.v-version }}
    strategy:
      matrix:
        os: [ubuntu-latest, macos-latest, windows-latest]
        v-version: latest
    runs-on: ${{ matrix.os }}
     runs:
      - uses: actions/checkout@v1
      - uses: nocturlab/setup-vlang-action@master
        with:
          v-version: ${{ matrix.v-version }}
      - name: Run tests
        run: v test tests/hello_test.v
      - name: Run vet
        run: v vet .
      - name: Run examples
        run: v run examples/hello_world.v
      - name: vfmt verify
        run: v fmt -verify *.v
